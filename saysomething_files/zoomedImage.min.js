"use strict";define("zoomedImage",["lodash","react","reactDOM","coreUtils","core","santaProps","imageCommon"],function(t,e,i,s,o,a,n){var r=o.compMixins,p=n.imageElements,h={mixins:[r.skinBasedComp,r.animationsMixin],displayName:"ZoomedImage",propTypes:{cssFiltersSupported:a.Types.BrowserFlags.cssFiltersSupported.isRequired,currentUrl:a.Types.currentUrl,getMediaFullStaticUrl:a.Types.ServiceTopology.getMediaFullStaticUrl,staticMediaUrl:a.Types.ServiceTopology.staticMediaUrl,reportBI:a.Types.reportBI,devicePixelRatio:a.Types.Device.devicePixelRatio,id:e.PropTypes.string,containerWidth:e.PropTypes.number.isRequired,containerHeight:e.PropTypes.number.isRequired,imageData:e.PropTypes.object.isRequired,displayMode:e.PropTypes.string,filterEffect:e.PropTypes.object,initialClickPosition:e.PropTypes.object,style:e.PropTypes.object,"data-type":e.PropTypes.string},statics:{useSantaTypes:!0},shouldZoom:!0,shouldDrag:!1,sequenceId:"",animatableElement:"image",getInitialState:function(){return this.eventsToAssign={},this.imageForLoadEvents=null,{}},componentDidMount:function(){this.assignLoadEvents()},componentDidUpdate:function(){this.assignLoadEvents()},hasEffect:function(){return this.props.filterEffect&&"none"!==this.props.filterEffect.effectType},getTargetPosition:function(t){this.clientRect=this.clientRect||s.domMeasurements.getBoundingRect(i.findDOMNode(this));var e={height:this.props.containerHeight,width:this.props.containerWidth},o=t.clientX-this.clientRect.left,a=t.clientY-this.clientRect.top;return{x:-(this.props.imageData.width-e.width)*(o/e.width),y:-(this.props.imageData.height-e.height)*(a/e.height)}},zoomOut:function(t){this.stopSequence(this.sequenceId),t()},zoomIn:function(){this.shouldDrag=this.shouldZoom;var t=this.getTargetPosition(this.props.initialClickPosition);this.animate(this.animatableElement,"BasePosition",0,0,{to:{x:-(this.props.imageData.width/2-this.props.containerWidth/2),y:-(this.props.imageData.height/2-this.props.containerHeight/2)}}),this.sequenceId=this.animate(this.animatableElement,"BasePosition",.2,0,{to:t})},drag:function(t){if(this.shouldDrag){var e=this.getTargetPosition(t);this.animate(this.animatableElement,"BasePosition",.5,0,{to:e})}},getDefaultSkinName:function(){return"skins.core.ImageNewSkinZoomable"},assignLoadEvents:function(){if(!t.isEmpty(this.eventsToAssign)){var e=this.eventsToAssign.readyCallback,i=this.eventsToAssign.errorCallback,s=this.eventsToAssign.uri;this.eventsToAssign={},this.imageForLoadEvents||(this.imageForLoadEvents=new window.Image,e&&(this.imageForLoadEvents.onload=e),i&&(this.imageForLoadEvents.onerror=i)),this.imageForLoadEvents.src=s}},getOnloadUrl:function(t){this.eventsToAssign={uri:t.uri,readyCallback:this.zoomIn}},getSkinProperties:function(){var e,i=t.get(this,"props.imageData.alt",""),s=this.hasEffect()&&!this.props.cssFiltersSupported,o=t.assign({containerWidth:this.props.imageData.width,containerHeight:this.props.imageData.height,imageData:this.props.imageData,displayMode:this.props.displayMode,fittingType:this.props.displayMode},this.props);e=p.getImageComponents(o,i,s,this.getOnloadUrl);var a=t.assign({width:this.props.containerWidth,height:this.props.containerHeight,WebkitTransform:"translateZ(0)",transform:"translateZ(0)",position:"relative"});return s&&(this.animatableElement="svg"),this.props.cssFiltersSupported||(a.overflow="hidden"),{"":{style:a,onMouseMove:this.drag,addChildren:e,"data-image-zoomed":!0}}}};return o.compRegistrar.register("core.components.ZoomedImage",h),h});
//# sourceMappingURL=zoomedImage.min.js.map