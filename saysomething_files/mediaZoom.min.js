"use strict";define("mediaZoom/mediaZoom/svgShapesData",[],function(){return{buttonClose:{svg:{viewBox:"0 0 180 180",className:"svgButtonClose"},content:'<path d="M5 5 L175 175 M175 5 L5 175"/>'},buttonPrevious:{svg:{viewBox:"0 0 180 310",className:"svgNavButton"},content:'<path d="M170 10 L10 161 M10 150 L170 300"/>'},buttonNext:{svg:{viewBox:"0 0 180 310",className:"svgNavButton"},content:'<path d="M10 10 L170 161 M170 150 L10 300"/>'}}}),define("mediaZoom/skins/skins.json",[],function(){var t={};return t["wysiwyg.viewer.skins.AppPartMediaZoomSkin"]={react:[["div","blockingLayer",[],{},["div","dialogBox",[],{},["div","xButton",[],{}],["div","itemsContainer",[],{}]],["div","buttonPrev",["_btn"],{}],["div","buttonNext",["_btn"],{}]]],params:{tdr:"URL",trns:"TRANSITION",bg:"BG_COLOR",heightSpacer:"SIZE"},paramsDefaults:{tdr:"BASE_THEME_DIRECTORY",trns:"opacity 0.5s ease 0s",bg:"#000",heightSpacer:["pad","pad"]},paramsMutators:{bg:[["alpha",.75]]},css:{"%":"position:fixed !important;width:100% !important;height:100% !important;z-index:99999;","%blockingLayer":"background-color:[bg];position:fixed;top:0;right:0;bottom:0;left:0;visibility:visible;zoom:1;overflow:auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;","%[data-state~='mobile'] %blockingLayer,%[data-state~='tablet'] %blockingLayer":"background-color:#5F6360;","%dialogBox":"margin:auto;background:#fff;min-width:500px;position:relative;text-align:right;width:500px;padding:10px 10px 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;","%xButton":"display:inline-block;right:-25px;width:25px;height:25px;background:#fff url([tdr]close.gif) no-repeat 50% 50%;cursor:pointer;position:absolute;top:0;z-index:500;","%_btn":"position:fixed;top:0;width:100px;height:100%;background:url([tdr]arrows_white.png) no-repeat;overflow:hidden;text-indent:-9999px;cursor:pointer;opacity:0.3;[trns]","%buttonNext":"right:20px;background-position:-30px 50%;","%buttonPrev":"left:20px;background-position:70px 50%;","%_btn:hover":"opacity:1;"}},t["wysiwyg.viewer.skins.MediaZoomSkin"]={react:[["div","blockingLayer",[],{},["div","dialogBox",[],{},["div","itemsContainer",[],{}]],["div","xButton",[],{}],["div","buttonNext",["_btn"],{}],["div","buttonPrev",["_btn"],{}]]],params:{trns:"TRANSITION",bg:"BG_COLOR",heightSpacer:"SIZE"},paramsDefaults:{trns:"opacity 0.5s ease 0s",bg:"#000",heightSpacer:["pad","pad"]},paramsMutators:{bg:[["alpha",.9]]},css:{"%":"position:fixed !important;width:100% !important;height:100% !important;z-index:99999;","%blockingLayer":"background-color:[bg];position:fixed;top:0;right:0;bottom:0;left:0;visibility:visible;zoom:1;overflow:auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;","%dialogBox":"margin:auto;max-width:100%;position:relative;width:500px;padding:35px 0 50px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;","%xButton":"display:inline-block;right:50px;top:50px;cursor:pointer;position:fixed;z-index:500;","%xButton %_svgButtonClose":"width:18px;height:18px;stroke:#fff;stroke-width:15;position:absolute;right:0;top:0;","%_btn":"position:fixed;top:0;width:33%;height:100%;overflow:hidden;text-indent:-9999px;cursor:pointer;opacity:0.9;[trns]","%_btn %_svgNavButton":"width:18px;height:31px;stroke:#fff;stroke-width:20;position:absolute;top:50%;","%buttonNext":"right:0;","%buttonNext %_svgNavButton":"right:50px;","%buttonPrev":"left:0;","%buttonPrev %_svgNavButton":"left:50px;","%_btn:hover":"opacity:1;"}},t["wysiwyg.viewer.skins.NonOptimizedMediaZoomSkin"]={react:[["div","blockingLayer",[],{},["div","dialogBox",["_z-dialog"],{},["div","itemsContainer",[],{}],["div","buttonPrev",["_btn"],{}],["div","buttonNext",["_btn"],{}],["div","xButton",["_btn"],{}]]]],params:{trns:"TRANSITION",bg:"BG_COLOR",heightSpacer:"SIZE"},paramsDefaults:{trns:"opacity 0.5s ease 0s",bg:"#000",heightSpacer:["pad","pad"]},paramsMutators:{bg:[["alpha",.5]]},mediaQueries:[{query:"@media (orientation: portrait)",css:{"%xButton":"width:75px;height:75px;","%[data-state~='mobile'] %_svgButtonClose":"width:45px;height:45px;right:15px;top:15px;","%[data-state~='mobile'] %_svgNavButton":"width:45px;height:45px;margin-top:-22px;","%[data-state~='mobile'] %buttonNext %_svgNavButton":"padding:15px 12px 15px 18px;","%[data-state~='mobile'] %buttonPrev %_svgNavButton":"padding:15px 18px 15px 12px;","%[data-state~='tablet'] %_svgButtonClose":"width:35px;height:35px;right:20px;top:20px;","%[data-state~='tablet'] %_svgNavButton":"width:35px;height:35px;margin-top:-17px;","%[data-state~='tablet'] %buttonNext %_svgNavButton":"padding:20px 18px 20px 22px;","%[data-state~='tablet'] %buttonPrev %_svgNavButton":"padding:20px 22px 20px 18px;"}},{query:"@media (orientation: landscape)",css:{"%xButton":"width:45px;height:45px;","%_svgNavButton":"width:25px;height:25px;margin-top:-12px;","%buttonNext %_svgNavButton":"padding:10px 9px 10px 11px;","%buttonPrev %_svgNavButton":"padding:10px 11px 10px 9px;","%[data-state~='tablet'] %_svgButtonClose":"width:19px;height:19px;right:13px;top:13px;","%[data-state~='mobile'] %_svgButtonClose":"width:25px;height:25px;right:10px;top:10px;"}}],css:{"%":"position:fixed !important;width:100% !important;height:100% !important;-webkit-tap-highlight-color:transparent;z-index:500;","%blockingLayer":"background-color:#000;position:fixed;top:0;right:0;bottom:0;left:0;visibility:visible;zoom:1;overflow:auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;","%dialogBox":"position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;","%_btn":"display:inline-block;cursor:pointer;position:fixed;overflow:hidden;text-indent:-9999px;opacity:0.9;[trns]  z-index:500;","%xButton":"background-color:[bg];right:15px;top:15px;","%xButton %_svgButtonClose":"stroke:#fff;stroke-width:15;position:absolute;","%_svgNavButton":"stroke:#fff;stroke-width:25;position:absolute;top:50%;background-color:[bg];margin:15px;","%buttonNext":"top:0;right:0;width:33%;height:100%;","%buttonNext %_svgNavButton":"right:0;","%buttonPrev":"top:0;left:0;width:33%;height:100%;","%buttonPrev %_svgNavButton":"left:0;","%_btn:hover":"opacity:1;",'%[data-state~="hideButtons"] %_btn':"display:none;"}},t}),define("mediaZoom",["zepto","react","lodash","core","mediaZoom/mediaZoom/svgShapesData","reactDOM","santaProps","image","imageZoomDisplayer","utils","skins","mediaZoom/skins/skins.json"],function(t,e,i,o,n,s,a,r,p,d,l,u){function g(t){return t&&!t.target.href}function c(t){return t.isMobileDevice||t.isTabletDevice}var h=o.compMixins,x={width:240,height:60},v={width:0,height:0},m={displayName:"MediaZoom",mixins:[h.skinBasedComp,h.animationsMixin,h.skinInfo,o.compMixins.galleryImageExpandedActionMixin,h.popupPagesMixin],propTypes:i.assign({styleId:a.Types.Component.styleId.isRequired,isZoomAllowed:a.Types.RenderFlags.isZoomAllowed.isRequired,isMobileDevice:a.Types.Device.isMobileDevice.isRequired,isTabletDevice:a.Types.Device.isTabletDevice.isRequired,rootNavigationInfo:a.Types.Component.rootNavigationInfo.isRequired,navigateToPage:a.Types.navigateToPage.isRequired,passClickEvent:a.Types.passClickEvent.isRequired,exitFullScreenMode:a.Types.exitFullScreenMode.isRequired,enterFullScreenMode:a.Types.enterFullScreenMode.isRequired,isExperimentOpen:a.Types.isExperimentOpen,getPrevAndNextStateFunc:e.PropTypes.func,isDataChangedFunc:e.PropTypes.func,getChildCompFunc:e.PropTypes.func,getBoxDimensionsFunc:e.PropTypes.func,actualNavigateToItemFunc:e.PropTypes.func,closeFunction:e.PropTypes.func,dataChanged:e.PropTypes.bool},a.santaTypesUtils.getSantaTypesByDefinition(r),a.santaTypesUtils.getSantaTypesByDefinition(p)),statics:{useSantaTypes:!0},getSvgButton:function(t,o){var s=n[t],a=i.clone(s.svg),r=this.props.styleId+"_";return i.assign(a,{className:r+s.svg.className,dangerouslySetInnerHTML:{__html:s.content},tabIndex:0,role:"button",onKeyDown:d.accessibility.keyboardInteractions.activateBySpaceOrEnterButton},o),e.DOM.svg(a)},getInitialState:function(){this.isAnimating=!1,this.shouldUpdateSizeOnLayout=!0;var t="desktop";return this.props.isMobileDevice?t="mobile":this.props.isTabletDevice&&(t="tablet"),i.assign({$buttonsState:"showButtons",$device:t},this.props.getPrevAndNextStateFunc())},componentWillReceiveProps:function(t){if(this.props.isZoomAllowed){var e=this.props.dataChanged||this.props.isDataChangedFunc(this.props,t);this.shouldUpdateSizeOnLayout=e,e&&this.setState(this.props.getPrevAndNextStateFunc())}else setTimeout(this.closeMediaZoom,0)},getSkinProperties:function(){var t=!!this.state.next?{}:{display:"none"},e=c(this.props)?v:x,i=this.props.getChildCompFunc({toggleButtons:this.toggleButtons,goToNextItem:this.clickOnNextButton,goToPrevItem:this.clickOnPreviousButton},e),o={"":{onKeyDown:this.preventTabbingOut,"data-width-spacer":e.width,"data-height-spacer":e.height},blockingLayer:{onClick:this.onBlockingLayerClick},xButton:{onClick:this.closeMediaZoom,children:[this.getSvgButton("buttonClose",{"aria-label":"close"})]},dialogBox:{onClick:this.handleDialogBoxClick},itemsContainer:{children:i,"aria-live":"polite",tabIndex:-1},buttonPrev:{onClick:this.clickOnPreviousButton,style:t,children:[this.getSvgButton("buttonPrevious",{"aria-label":"previous"})]},buttonNext:{onClick:this.clickOnNextButton,style:t,children:[this.getSvgButton("buttonNext",{"aria-label":"next"})]}};return c(this.props)&&(o.blockingLayer.onSwipeLeft=this.clickOnNextButton,o.blockingLayer.onSwipeRight=this.clickOnPreviousButton),o},onBlockingLayerClick:function(t){g(t)&&(this.closeMediaZoom(),t.preventDefault(),t.stopPropagation())},componentDidLayout:function(){var e=this.props.getBoxDimensionsFunc(),i={width:e.dialogBoxWidth,height:e.dialogBoxHeight,"margin-top":e.marginTop,"margin-left":e.marginLeft,padding:e.padding},o={width:e.dialogBoxWidth,height:e.dialogBoxHeight,marginTop:e.marginTop,marginLeft:e.marginLeft,padding:e.padding};if(this.shouldUpdateSizeOnLayout){this.shouldUpdateSizeOnLayout=!1;var n=this;this.sequence().add("dialogBox","BaseDimensions",.5,0,{to:o}).add("itemsContainer","FadeIn",.5,0).onCompleteAll(function(){n.unBlockNavigation(),n.handleImageExpandedAction()}).execute()}else t(s.findDOMNode(this.refs.dialogBox)).css(i)},clickOnNextButton:function(t){this.navigateToOtherPageWithAnimations(this.state.next),t&&(t.preventDefault(),t.stopPropagation())},clickOnPreviousButton:function(t){this.navigateToOtherPageWithAnimations(this.state.prev),t&&(t.preventDefault(),t.stopPropagation())},navigateToOtherPageWithAnimations:function(t){if(!this.isNavigationBlocked()){var e=this;this.blockNavigation(),this.animate("itemsContainer","FadeOut",.5,0,null,{onComplete:function(){e.props.actualNavigateToItemFunc(t)}})}},closeMediaZoom:function(){if(this.props.closeFunction)this.props.closeFunction();else{var t=i.omit(this.props.rootNavigationInfo,["imageZoom","pageItemId","title"]);this.props.navigateToPage(t)}},handleDialogBoxClick:function(t){g(t)&&(t.preventDefault(),t.stopPropagation(),this.props.passClickEvent(t))},unBlockNavigation:function(){this.isAnimating=!1},blockNavigation:function(){this.isAnimating=!0},isNavigationBlocked:function(){return this.isAnimating},componentDidMount:function(){this.props.enterFullScreenMode(),this._focusedElementBeforeMediaZoom=window.document.activeElement,s.findDOMNode(this.refs.itemsContainer).focus()},componentWillUnmount:function(){this.props.exitFullScreenMode(),t(this._focusedElementBeforeMediaZoom).focus()},toggleButtons:function(t){var e="showButtons"===this.state.$buttonsState?"hideButtons":"showButtons";this.setState({$buttonsState:e}),t&&(t.preventDefault(),t.stopPropagation())}};return o.compRegistrar.register("wysiwyg.viewer.components.MediaZoom",m),l.skinsMap.addBatch(u),m});
//# sourceMappingURL=mediaZoom.min.js.map