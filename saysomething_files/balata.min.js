"use strict";define("balata/skins/skins.json",[],function(){var e={};return e["skins.viewer.balata.balataBaseSkin"]={react:[]},e}),define("balata",["react","lodash","santaProps","core","coreUtils","backgroundCommon","skins","balata/skins/skins.json"],function(e,i,t,s,a,o,n,r){function p(e,t,s){var a=t[b[e]]||{},o=i.get(s,["transforms",e],{}),n=i.merge({},a,o),r={};return n.opacity&&(r.opacity=n.opacity,n=i.omit(n,"opacity")),i.isEmpty(n)||(r.transform=i.reduce(n,function(e,i,t){return e+=t+"("+i+") "},"")),r}function l(e,i,t,s){var a={skin:k.skin,styleId:k.style},o={style:p(b.MEDIA,t,i),id:e.id+k.ref,ref:k.ref,bgEffectName:s,filterEffect:t.filterEffect,fittingType:t.fittingType,alignType:t.alignType,mediaTransforms:t.mediaTransforms,enableVideo:e.enableVideo,notifyMediaState:e.notifyMediaState,mediaQuality:e.mediaQuality,setMediaAPI:e.setMediaAPI,compProp:e.compProp,isPlayingAllowed:e.isPlayingAllowed,playerInteraction:e.playerInteraction};return this.createChildComponent(t.mediaRef,k.comp,a,o)}function c(e,i,t,s){var a={skin:h.skin,styleId:h.style},o={style:p(b.OVERLAY,t,i),colorOverlay:t.colorOverlay,colorOverlayOpacity:t.colorOverlayOpacity,imageOverlay:t.imageOverlay,bgEffectName:s,id:e.id+h.ref,ref:h.ref};return this.createChildComponent(null,h.comp,a,o)}function y(e,i,t,s){var a={skin:D.skin,styleId:D.style},o={style:p(b.UNDERLAY,t,i),colorOverlay:t.color,colorOverlayOpacity:d(t.colorOpacity,t.mediaRef),bgEffectName:s,id:e.id+D.ref,ref:D.ref};return this.createChildComponent(null,D.comp,a,o)}function d(e,i){return!i||"WixVideo"!==i.type&&"Video"!==i.type?e:0}function g(e){var i=e.mediaRef,t=e.imageOverlay||e.colorOverlay,s=e.showOverlayForMediaType||"WixVideo",a=i&&("all"===s||s===i.type);return!(!t||!a)}function f(e){return i.get(e.compDesign,"background",i.get(e.compData,"background",{}))}function m(e,t){var s=f(e);if(i.isEmpty(s))return null;var a=v.getBgEffectName(e.compBehaviors,e.isDesktopDevice,e.isMobileView),o=[];return o.push(y.call(this,e,t,s,a)),i.isEmpty(s.mediaRef)||o.push(l.call(this,e,t,s,a)),g(s)&&o.push(c.call(this,e,t,s,a)),o}var u=s.compMixins,v=a.containerBackgroundUtils,b=a.balataConsts,k={comp:"wysiwyg.viewer.components.background.bgMedia",skin:"skins.viewer.bgMedia.bgMediaSkin",style:"bgMedia",ref:b.MEDIA},h={comp:"wysiwyg.viewer.components.background.bgOverlay",skin:"skins.viewer.bgOverlay.bgOverlaySkin",style:"bgOverlay",ref:b.OVERLAY},D={comp:"wysiwyg.viewer.components.background.bgOverlay",skin:"skins.viewer.bgOverlay.bgOverlaySkin",style:"bgColor",ref:b.BG_COLOR},T={displayName:"Balata",mixins:[u.skinBasedComp,o.mixins.backgroundDetectionMixin],propTypes:i.defaults({id:e.PropTypes.string.isRequired,parentId:e.PropTypes.string.isRequired,compData:e.PropTypes.object,compDesign:e.PropTypes.object,compProp:e.PropTypes.object,compBehaviors:e.PropTypes.object,style:e.PropTypes.object,onClick:e.PropTypes.func,isDesktopDevice:t.Types.Device.isDesktopDevice.isRequired,isMobileView:t.Types.isMobileView.isRequired,designDataChangeAspect:t.Types.SiteAspects.designDataChangeAspect.isRequired,isPlayingAllowed:e.PropTypes.bool,enableVideo:e.PropTypes.bool,notifyMediaState:e.PropTypes.func,setMediaAPI:e.PropTypes.func,mediaQuality:e.PropTypes.string},t.santaTypesUtils.getSantaTypesByDefinition(o.components.bgMedia),t.santaTypesUtils.getSantaTypesByDefinition(o.components.bgOverlay)),statics:{useSantaTypes:!0},getInitialState:function(){return{transforms:{}}},componentWillReceiveProps:function(e){this.handleDesignDataBehaviors(e)},handleDesignDataBehaviors:function(e){var i=f(e),t=f(this.props);this.setState({transforms:{}}),t.id!==i.id&&this.props.designDataChangeAspect.notify(this.props.parentId,this.props.compDesign,e.compDesign)},getSkinProperties:function(){var e=v.getBgEffectName(this.props.compBehaviors,this.props.isDesktopDevice,this.props.isMobileView),t=m.call(this,this.props,this.state);return{"":{style:i.assign({position:"absolute",top:0,width:"100%",height:"100%",pointerEvents:e?"none":"auto"},this.props.style),children:t,onClick:this.props.onClick,key:"balata_"+e,"data-enable-video":this.props.enableVideo}}},getDefaultSkinName:function(){return"skins.viewer.balata.balataBaseSkin"}};return s.compRegistrar.register("wysiwyg.viewer.components.background.Balata",T),n.skinsMap.addBatch(r),T});
//# sourceMappingURL=balata.min.js.map